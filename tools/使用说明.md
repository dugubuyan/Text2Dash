# æ•°æ®åº“ç»“æ„åˆ†æå·¥å…·ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½ç®€ä»‹

è¿™ä¸ªå·¥å…·å¯ä»¥è‡ªåŠ¨åˆ†ææ•°æ®åº“çš„æ‰€æœ‰è¡¨ç»“æ„ï¼Œç”Ÿæˆä¸€ä¸ª AI å¯è¯»çš„ Markdown æ–‡æ¡£ï¼ŒåŒ…å«ï¼š

- ğŸ“Š æ‰€æœ‰è¡¨çš„ç»“æ„ä¿¡æ¯ï¼ˆå­—æ®µã€ç±»å‹ã€çº¦æŸï¼‰
- ğŸ¯ è¡¨çš„ç”¨é€”åˆ†æ
- ğŸ“ æ•°æ®å†…å®¹è¯´æ˜
- ğŸ”— å¤–é”®å…³ç³»å›¾
- ğŸ” ç´¢å¼•ä¿¡æ¯
- ğŸ’¡ å¯ç”¨çš„æŸ¥è¯¢æ“ä½œå»ºè®®ï¼ˆç±»ä¼¼ Function Call æè¿°ï¼‰

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install sqlalchemy

# æ ¹æ®æ•°æ®åº“ç±»å‹å®‰è£…é©±åŠ¨
pip install psycopg2-binary  # PostgreSQL
pip install pymysql          # MySQL
# SQLite æ— éœ€é¢å¤–å®‰è£…
```

### 2. åŸºæœ¬ä½¿ç”¨

```bash
# åˆ†æ SQLite æ•°æ®åº“
python tools/db_schema_analyzer.py sqlite:///./data/config.db

# åˆ†æ PostgreSQL æ•°æ®åº“
python tools/db_schema_analyzer.py postgresql://user:password@localhost:5432/dbname

# åˆ†æ MySQL æ•°æ®åº“
python tools/db_schema_analyzer.py mysql+pymysql://user:password@localhost:3306/dbname

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
python tools/db_schema_analyzer.py sqlite:///./data/config.db my_schema.md
```

### 3. è¿è¡Œç¤ºä¾‹

```bash
# Shell è„šæœ¬ç¤ºä¾‹
./tools/example_usage.sh

# Python ç¤ºä¾‹
python tools/example_usage.py
```

## æ•°æ®åº“ URL æ ¼å¼

| æ•°æ®åº“ç±»å‹ | URL æ ¼å¼ |
|-----------|---------|
| SQLite | `sqlite:///path/to/database.db` |
| PostgreSQL | `postgresql://user:password@host:port/database` |
| MySQL | `mysql+pymysql://user:password@host:port/database` |
| SQL Server | `mssql+pyodbc://user:password@host/database?driver=...` |

## ç”Ÿæˆçš„æ–‡æ¡£ç¤ºä¾‹

ç”Ÿæˆçš„ Markdown æ–‡æ¡£åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```markdown
## students

**ç”¨é€”**: å­¦ç”Ÿä¿¡æ¯ç®¡ç†

**æ•°æ®å†…å®¹**: å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€å­¦å·ã€å…¥å­¦æ—¥æœŸç­‰ï¼‰

### å­—æ®µç»“æ„

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| student_id | TEXT | å¦ | - | å”¯ä¸€æ ‡è¯†ç¬¦ |
| name | TEXT | å¦ | - | åç§° |
| email | TEXT | æ˜¯ | - | ç”µå­é‚®ä»¶ |

**ä¸»é”®**: student_id

### å¤–é”®å…³ç³»

- `major_id` â†’ `majors.major_id`

### å¯ç”¨æŸ¥è¯¢æ“ä½œ

- æŸ¥è¯¢æ‰€æœ‰studentsè®°å½•
- æ ¹æ®IDæŸ¥è¯¢å•ä¸ªstudentsè®°å½•
- æ ¹æ®nameæœç´¢students
- æ ¹æ®emailæŸ¥æ‰¾students
- æŸ¥è¯¢studentsåŠå…¶å…³è”çš„majorsä¿¡æ¯
- ç»Ÿè®¡studentsæ€»æ•°
```

## Python ä»£ç ä½¿ç”¨

```python
from tools.db_schema_analyzer import DatabaseSchemaAnalyzer

# åˆ›å»ºåˆ†æå™¨
analyzer = DatabaseSchemaAnalyzer("sqlite:///./data/config.db")

# è¿æ¥å¹¶ç”Ÿæˆæ–‡æ¡£
if analyzer.connect():
    analyzer.generate_markdown("output.md")
    analyzer.close()
```

## é«˜çº§åŠŸèƒ½

### è·å–è¡¨ä¿¡æ¯

```python
analyzer = DatabaseSchemaAnalyzer("sqlite:///./data/config.db")
analyzer.connect()

# è·å–æ‰€æœ‰è¡¨å
tables = analyzer.get_table_names()

# è·å–ç‰¹å®šè¡¨ä¿¡æ¯
table_info = analyzer.get_table_info("students")
print(f"å­—æ®µæ•°: {len(table_info['columns'])}")

analyzer.close()
```

### åˆ†æè¡¨ç”¨é€”

```python
table_info = analyzer.get_table_info("students")
purpose = analyzer.analyze_table_purpose(table_info)
print(f"è¡¨ç”¨é€”: {purpose}")
```

### ç”ŸæˆæŸ¥è¯¢å»ºè®®

```python
table_info = analyzer.get_table_info("students")
suggestions = analyzer.generate_query_suggestions(table_info)
for suggestion in suggestions:
    print(f"- {suggestion}")
```

## å¸¸è§é—®é¢˜

### è¿æ¥å¤±è´¥

**é—®é¢˜**: `âœ— æ•°æ®åº“è¿æ¥å¤±è´¥: unable to open database file`

**è§£å†³**: æ£€æŸ¥æ•°æ®åº“è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæ–‡ä»¶æ˜¯å¦å­˜åœ¨

### é©±åŠ¨æœªå®‰è£…

**é—®é¢˜**: `âœ— æ•°æ®åº“è¿æ¥å¤±è´¥: No module named 'psycopg2'`

**è§£å†³**: å®‰è£…ç›¸åº”çš„æ•°æ®åº“é©±åŠ¨
```bash
pip install psycopg2-binary
```

### æƒé™ä¸è¶³

**é—®é¢˜**: `âœ— æ•°æ®åº“è¿æ¥å¤±è´¥: permission denied`

**è§£å†³**: ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¯»å–è¡¨ç»“æ„çš„æƒé™

## æ³¨æ„äº‹é¡¹

1. âœ… å·¥å…·åªè¯»å–è¡¨ç»“æ„ï¼Œä¸ä¼šè¯»å–å®é™…æ•°æ®
2. âœ… ä¸ä¼šä¿®æ”¹æ•°æ®åº“å†…å®¹
3. âœ… ç”Ÿæˆçš„æ–‡æ¡£ä¸åŒ…å«æ•æ„Ÿæ•°æ®
4. âš ï¸ å¯¹äºå¤§å‹æ•°æ®åº“ï¼ˆ100+ è¡¨ï¼‰ï¼Œåˆ†æå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´
5. âš ï¸ ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™è¯»å–è¡¨ç»“æ„

## é€‚ç”¨åœºæ™¯

- ğŸ“š ä¸º AI åŠ©æ‰‹æä¾›æ•°æ®åº“ç»“æ„æ–‡æ¡£
- ğŸ“– ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£ä¾›å›¢é˜Ÿå‚è€ƒ
- ğŸ” å¿«é€Ÿäº†è§£é™Œç”Ÿæ•°æ®åº“çš„ç»“æ„
- ğŸ¤– ä¸º LLM æä¾› Function Call é£æ ¼çš„æŸ¥è¯¢å»ºè®®
- ğŸ“Š æ•°æ®åº“ç»“æ„åˆ†æå’Œå®¡è®¡

## æ›´å¤šä¿¡æ¯

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼š[README.md](./README.md)
